<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="المصلحة البيومترية - خدمات الوثائق البيومترية">
    <title>المصلحة البيومترية</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/test0.css') }}">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
</head>
<body>
    <div class="header">
        <h1>الجمهورية الجزائرية الديمقراطية الشعبية</h1>
        <p>وزارة الداخلية والجماعات المحلية و التهيئة العمرانية</p>
        <h1>الوثائق البيومترية</h1>
        <p>جواز السفر، بطاقة التعريف و رخصة السياقة</p>
        <img alt="علم الجزائر" height="50" src="https://storage.googleapis.com/a1aa/image/IxRuSHASGwL0LJ5dMEbXECTXsfGvpkQtnR7GVsD0T4CaVG5JA.jpg" width="50"/>
    </div>
    <div class="content">
        <h2>المصلحة البيومترية</h2>
        <div id="error-message" class="alert alert-danger" style="display: none;"></div>
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-danger">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        <form id="loginForm">
            <div class="form-group">
                <label for="email">البريد الإلكتروني</label>
                <input id="email" name="email" type="email" required/>
            </div>
            <div class="form-group">
                <label for="password">كلمة المرور</label>
                <input id="password" name="password" type="password" required/>
            </div>
            <div class="form-group">
                <button type="submit" id="login-button">تسجيل الدخول</button>
                <div id="loading" style="display: none;">جاري تسجيل الدخول...</div>
            </div>
            <p class="note">
                <a href="#" onclick="alert('يرجى الاتصال بالمسؤول لإعادة تعيين كلمة المرور')">تغير كلمة المرور واسم المستخدم</a>
            </p>
        </form>
    </div>
    <!-- Firebase Configuration -->
    <script src="{{ url_for('static', filename='js/firebase-config.js') }}"></script>
    <script>
        document.getElementById('loginForm').addEventListener('submit', async (event) => {
            event.preventDefault();
            const button = document.getElementById('login-button');
            const loading = document.getElementById('loading');
            const errorDiv = document.getElementById('error-message');
            
            button.style.display = 'none';
            loading.style.display = 'block';
            errorDiv.style.display = 'none';
            
            try {
                await handleLogin(event);
            } catch (error) {
                errorDiv.textContent = error.message;
                errorDiv.style.display = 'block';
                button.style.display = 'block';
                loading.style.display = 'none';
            }
        });
    </script>
</body>
</html>


